<main>
  <section class="list">
    <h2>My adoption requests</h2>
    <div class="grid" *ngIf="requests.length; else empty">
      <article class="item" *ngFor="let r of requests">
        <div class="left">
          <img [src]="r.animal?.imageUrl || 'https://placehold.co/160x120?text=Pet'" [alt]="r.animal?.name || 'Pet'" />
          <div>
            <h3>{{ r.animal?.name || 'Animal' }}</h3>
            <p class="date">{{ r.createdAt | date:'medium' }}</p>
          </div>
        </div>
        <div class="right" *ngIf="r.status === 'Pending'">
          <a class="btn" [routerLink]="['/animals', r.animalId]">Details</a>
          <button class="btn danger" (click)="cancel(r.id)">Cancel</button>
        </div>
        <div class="status-msg ok" *ngIf="r.status === 'Approved'">
          Congratulations! This animal is yours!
        </div>
        <div class="status-msg danger" *ngIf="r.status === 'Declined'">
          Unfortunately, the request has been rejected.
        </div>
      </article>
    </div>
    <ng-template #empty>
      <div class="empty">No requests yet!</div>
    </ng-template>
  </section>
</main>